================================================================================
LLM PROMPT SENT TO OPENAI
================================================================================

Model: gpt-4o-mini
Temperature: 0
Response Format: JSON
Timestamp: 2025-12-19T16:53:44.847658
--------------------------------------------------------------------------------

SYSTEM MESSAGE:
--------------------------------------------------------------------------------
You are a precise data extraction assistant. Extract only what is explicitly present in the text. Return valid JSON only.

--------------------------------------------------------------------------------

USER PROMPT:
--------------------------------------------------------------------------------
You are an expert at extracting structured data from Indian electricity bills.

IMPORTANT INSTRUCTIONS:
1. Extract fields EXACTLY as they appear in the OCR text
2. If a field is missing or unclear, return null
3. Do NOT guess or infer values
4. Pay attention to common label variations across different states
5. Return ONLY valid JSON matching the schema

---
EXAMPLE 1 - Rajasthan Bill:
---
OCR Text:
AJMER VIDYUT VITRAN NIGAM LTD
Invoice No: 12022203035729
Consumer Name: RAJESH KUMAR
Consumer No: 0802/0037
Meter No: 4943282
Billing Period: May/2024
Previous Reading Date: 30-03-2024
Current Reading Date: 30-04-2024
Units Consumed: 753
Total Amount: Rs. 5600.00
Due Date: 22-05-2024

Correct Extraction:
{
  "invoice_number": "12022203035729",
  "consumer_name": "RAJESH KUMAR",
  "consumer_number": "0802/0037",
  "meter_number": "4943282",
  "billing_period": "May/2024",
  "previous_reading_date": "30-03-2024",
  "current_reading_date": "30-04-2024",
  "units_consumed": "753",
  "bill_amount": "5600.00",
  "due_date": "22-05-2024",
  "address": null,
  "discom": "AJMER VIDYUT VITRAN NIGAM LTD"
}

---
EXAMPLE 2 - Maharashtra Bill:
---
OCR Text:
MSEDCL - Maharashtra State Electricity Distribution Co Ltd
Bill Number: 000002436874795
Account Number: 000002436874795
Meter Serial No: 06507161895
Bill Month: MAY-24
Last Reading: 11-APR-24
Current Reading: 11-MAY-24
Consumption: 486 Units
Bill Amount: 3250
Payment Due: 25-MAY-24

Correct Extraction:
{
  "invoice_number": "000002436874795",
  "consumer_name": null,
  "consumer_number": "000002436874795",
  "meter_number": "06507161895",
  "billing_period": "MAY-24",
  "previous_reading_date": "11-APR-24",
  "current_reading_date": "11-MAY-24",
  "units_consumed": "486",
  "bill_amount": "3250",
  "due_date": "25-MAY-24",
  "address": null,
  "discom": "MSEDCL"
}

---
FIELD DESCRIPTIONS & COMMON LABELS:
---

1. invoice_number: Bill/Invoice number (unique identifier for the bill)
   Common labels: "Invoice No", "Bill No", "Bill Number", "Invoice Number", "बिल संख्या", "Receipt No"
   
2. consumer_name: Full name of the electricity consumer
   Common labels: "Consumer Name", "Name", "Customer Name", "उपभोक्ता का नाम"
   
3. consumer_number: Consumer/Account/Customer number (alphanumeric, may include slashes or hyphens)
   Common labels: "Consumer No", "Account No", "Customer No", "CA No", "Consumer Number", "खाता संख्या"
   
4. meter_number: Electricity meter serial number (usually 6-10 digits, may have prefix)
   Common labels: "Meter No", "Meter Number", "Meter Serial No", "MTR NO", "मीटर नंबर", "Meter S.No"
   
5. billing_period: Billing period or bill month
   Common labels: "Billing Period", "Bill Month", "Period", "Bill For", "बिलिंग अवधि"
   
6. previous_reading_date: Date of previous/last meter reading
   Common labels: "Previous Reading Date", "Last Reading", "Prev Reading", "पिछली रीडिंग", "Previous Date"
   Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY, DD.MM.YYYY
   
7. current_reading_date: Date of current/present meter reading
   Common labels: "Current Reading Date", "Present Reading", "Reading Date", "वर्तमान रीडिंग", "Current Date"
   Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY, DD.MM.YYYY
   
8. units_consumed: Total electricity units consumed (number, may have decimals)
   Common labels: "Units Consumed", "Consumption", "Total Units", "Energy Consumed", "खपत इकाइयाँ", "kWh"
   
9. bill_amount: Total bill amount (number, extract without currency symbol)
   Common labels: "Total Amount", "Bill Amount", "Amount Payable", "Net Amount", "कुल राशि", "Total"
   
10. due_date: Payment due date
    Common labels: "Due Date", "Payment Due Date", "Last Date", "Pay By", "भुगतान तिथि"
    Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY
   
11. address: Consumer's address (full address if available)
    Common labels: "Address", "Consumer Address", "पता", "Service Address"
    
12. discom: Distribution company name (electricity board/company)
    Common labels: Usually appears at top of bill as company name
    Examples: "MSEDCL", "BESCOM", "TPCODL", "AJMER VIDYUT VITRAN NIGAM LTD"

---
NOW EXTRACT FROM THIS BILL:
---

OCR Text:
3
Demand Surcharge
Mobile No.
9413535667
Bill Status
REGULAR
4.
Power Factor Surcharge (+) Incentive (-)/Shunt capacitor (3%)
Email
5.
Unauthorized Consumption Amount
K.No.
120222040693
6.
CT/PT/Meter Rent
7
RSN:
296
Transformer Rent
Service No.
152085
Security Amount
5600.00
8.
Base Fuel/Fuel/Special Fuel Surcharge
507.06
Account No.
0802/0037
9
Rebates (-) (i) Voltage
Bill Month
May/2024
Bill Period
1.0000
(ii) Solar/Sprinkler/Rural Rebate/Pre-Paid Meter Rebate
Feeder Code
11F1087279
Tariff Code
2020XA
10.
Total Nigam Dues(Sum of 1 to 9)
8531.41
Category
NDS
11
Electricity Duty
301.20
Sanctioned Load
(KW/HP)
10.00 KW
Connected Load (KW/HP)
10.00 KW
12.
Water Conservation Cess
75.30
Contracted Demand
(KVA)
Urban / Rural
URBAN
13.
Urban Cess
112.95
Supply Voltage
400 V
Metering Voltage
400 V
14.
Other Nigam Dues
Meter Owner
Metering Type
WCM
15.
Other Electricity Dues
Power Factor
Billing Demand
16.
Other Water Conservation Cess
Avg. Monthly
816
Meter Security Amount
17.
Other Urban Cess
Consumption (P.F.Y.)
Meter Status
OK
Consumer Status
R
18.
Other LED/Deferred Deposit
Current Reading Date
30-04-2024
Previous Reading Date
30-03-2024
19.
Adjusted Amount (Code)
Current Meter No.
4943282
MF
1/1
20.
Total Due Date Amount (Sum of 10 to 19)
9020.86
Current Reading KWH
19269
Previous Reading KWH
18516
21
Arrear Amount
Current Reading KVAH
0
Previous Reading KVAH
0
Current Reading KVA
0.000
Previous Reading KVA
Meter Changed /
Multimeter Meter No.
MF
KVA
0.000
22
Deferred Amount (Active Month)
23.
State Gov. Bearer Amount Tariff Subsidy/Domestic Subsidy
24
Agriculture Subsidy
Current Reading KWH
Previous Reading KWH
25.
Total Amount Before Due Date(SNO 20+21-22-23-24)
9021.00
Current Reading KVAH
Previous Reading KVAH
26.
LPS
170.63
Current Reading KVA
Previous Reading KVA
27.
Total Amount After Due Date(Sum of 25 and 26)
9191.00
Meter Status
Trans Loss Total Consumption
Bill Issue Date
01-05-2024
Due Date
22-05-2024
KWH
753
753
Last 6 Months
Apr24
Mar24
Feb24
Jan24
Nov23
Sep23
Consumption KVAH 0
0
Consumption
0.000
Consumer PAN No.
467
715
1189
1003
1431
1639
Bar Code:
Bill No.
** Note Line
ARREAR TCS :-
0.00
Consumer Name: AMAR
CHAND
Dill Math
Incremental monthly consumption of
existing consumer/ consumption of new
consumer (KWH)
Parallel operation charges on CPP
(MIP-HT-3 CONSUMERS)
0.00
0.00
12022203035729
Office Phone No.
01592-232420
M-2004
TCS/TDS Amount: 0.00
-X-
Toll Free Complaint No. 18001806565
AJMER VIDYUT VITRAN NIGAM LTD
Electricity Consumption Bill(Office Copy)
-X
Bill No.: 12022203035729
K.No.: 120222040693
Signature (AEn.)

Return JSON in this exact format:
{
  "invoice_number": null,
  "consumer_name": null,
  "consumer_number": null,
  "meter_number": null,
  "billing_period": null,
  "previous_reading_date": null,
  "current_reading_date": null,
  "units_consumed": null,
  "bill_amount": null,
  "due_date": null,
  "address": null,
  "discom": null
}


================================================================================
