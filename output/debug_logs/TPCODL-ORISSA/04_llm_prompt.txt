================================================================================
LLM PROMPT SENT TO OPENAI
================================================================================

Model: gpt-4o-mini
Temperature: 0
Response Format: JSON
Timestamp: 2025-12-19T00:31:39.560459
--------------------------------------------------------------------------------

SYSTEM MESSAGE:
--------------------------------------------------------------------------------
You are a precise data extraction assistant. Extract only what is explicitly present in the text. Return valid JSON only.

--------------------------------------------------------------------------------

USER PROMPT:
--------------------------------------------------------------------------------
You are an expert at extracting structured data from Indian electricity bills.

IMPORTANT INSTRUCTIONS:
1. Extract fields EXACTLY as they appear in the OCR text
2. If a field is missing or unclear, return null
3. Do NOT guess or infer values
4. Pay attention to common label variations across different states
5. Return ONLY valid JSON matching the schema

---
EXAMPLE 1 - Rajasthan Bill:
---
OCR Text:
AJMER VIDYUT VITRAN NIGAM LTD
Invoice No: 12022203035729
Consumer Name: RAJESH KUMAR
Consumer No: 0802/0037
Meter No: 4943282
Billing Period: May/2024
Previous Reading Date: 30-03-2024
Current Reading Date: 30-04-2024
Units Consumed: 753
Total Amount: Rs. 5600.00
Due Date: 22-05-2024

Correct Extraction:
{
  "invoice_number": "12022203035729",
  "consumer_name": "RAJESH KUMAR",
  "consumer_number": "0802/0037",
  "meter_number": "4943282",
  "billing_period": "May/2024",
  "previous_reading_date": "30-03-2024",
  "current_reading_date": "30-04-2024",
  "units_consumed": "753",
  "bill_amount": "5600.00",
  "due_date": "22-05-2024",
  "address": null,
  "discom": "AJMER VIDYUT VITRAN NIGAM LTD"
}

---
EXAMPLE 2 - Maharashtra Bill:
---
OCR Text:
MSEDCL - Maharashtra State Electricity Distribution Co Ltd
Bill Number: 000002436874795
Account Number: 000002436874795
Meter Serial No: 06507161895
Bill Month: MAY-24
Last Reading: 11-APR-24
Current Reading: 11-MAY-24
Consumption: 486 Units
Bill Amount: 3250
Payment Due: 25-MAY-24

Correct Extraction:
{
  "invoice_number": "000002436874795",
  "consumer_name": null,
  "consumer_number": "000002436874795",
  "meter_number": "06507161895",
  "billing_period": "MAY-24",
  "previous_reading_date": "11-APR-24",
  "current_reading_date": "11-MAY-24",
  "units_consumed": "486",
  "bill_amount": "3250",
  "due_date": "25-MAY-24",
  "address": null,
  "discom": "MSEDCL"
}

---
FIELD DESCRIPTIONS & COMMON LABELS:
---

1. invoice_number: Bill/Invoice number (unique identifier for the bill)
   Common labels: "Invoice No", "Bill No", "Bill Number", "Invoice Number", "बिल संख्या", "Receipt No"
   
2. consumer_name: Full name of the electricity consumer
   Common labels: "Consumer Name", "Name", "Customer Name", "उपभोक्ता का नाम"
   
3. consumer_number: Consumer/Account/Customer number (alphanumeric, may include slashes or hyphens)
   Common labels: "Consumer No", "Account No", "Customer No", "CA No", "Consumer Number", "खाता संख्या"
   
4. meter_number: Electricity meter serial number (usually 6-10 digits, may have prefix)
   Common labels: "Meter No", "Meter Number", "Meter Serial No", "MTR NO", "मीटर नंबर", "Meter S.No"
   
5. billing_period: Billing period or bill month
   Common labels: "Billing Period", "Bill Month", "Period", "Bill For", "बिलिंग अवधि"
   
6. previous_reading_date: Date of previous/last meter reading
   Common labels: "Previous Reading Date", "Last Reading", "Prev Reading", "पिछली रीडिंग", "Previous Date"
   Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY, DD.MM.YYYY
   
7. current_reading_date: Date of current/present meter reading
   Common labels: "Current Reading Date", "Present Reading", "Reading Date", "वर्तमान रीडिंग", "Current Date"
   Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY, DD.MM.YYYY
   
8. units_consumed: Total electricity units consumed (number, may have decimals)
   Common labels: "Units Consumed", "Consumption", "Total Units", "Energy Consumed", "खपत इकाइयाँ", "kWh"
   
9. bill_amount: Total bill amount (number, extract without currency symbol)
   Common labels: "Total Amount", "Bill Amount", "Amount Payable", "Net Amount", "कुल राशि", "Total"
   
10. due_date: Payment due date
    Common labels: "Due Date", "Payment Due Date", "Last Date", "Pay By", "भुगतान तिथि"
    Formats: DD-MM-YYYY, DD/MM/YYYY, DD-MMM-YY
   
11. address: Consumer's address (full address if available)
    Common labels: "Address", "Consumer Address", "पता", "Service Address"
    
12. discom: Distribution company name (electricity board/company)
    Common labels: Usually appears at top of bill as company name
    Examples: "MSEDCL", "BESCOM", "TPCODL", "AJMER VIDYUT VITRAN NIGAM LTD"

---
NOW EXTRACT FROM THIS BILL:
---

OCR Text:
Email Id
Mobile No
Area Details
DIV
: NED, NIMAPARA
SUBDIV
SECTION
: KAKATPUR
: KAKATPUR 2
DT No.
Pole No.
MRU No.
Walking Sequence :
Organization
NED13BF5
Connection Type
Parameter
Previous
Reading
KWH
MDI-KW
378.00
0.00
Bill Number
: 104S04682810
: 2300935262
: 21/12/2023
Bill Issue Date
Bill Basis
: Normal
Last Bill Issue Date
Bill Month
: 19/11/2023
Connection Details
Tariff Category
Contract Demand
Supply Voltage
Own Transformer
ED Exemption
Date of Connection
Security Deposit
Metering
Meter Reading Details
Current Reading M.F
532.00
1.00
1.00
1.00
: 2023/12
4% digital rebate to
Domestic & 1-Ph
GPS customers
Supply and Meter Details
Power Status
Power Factor
Power on Hour
Billed Demand
Meter Sl. No.
Col. Meter No
Bill Period
: Active
: 0.00
: 1.00KW
: TS2149729
19.11.2023 - 21.12.2023
: 33/1.0774
: Gen. Purpose Service
: 1.00 KW
: 0.23
: NIL
: 16/11/2020
: 2,740.00
: LV
Bill Days/Months
Load Factor
Meter Reading
: 0.00
: OK
Diff
T:F' Loss
Total
154.00
1.00
0.00
0.00
154.00
1.00
Due Date
28/12/2023]
((Immediate for Arrears))
Total Amount Payable
R$ 1,076.00
Last Bill Amount Payment made Rebate
322.00
308.00
Net Arrear
Current bill
Amount
DPS
Adj/Inst
-14.81
-1.13
1,076.72
0.00
0.00
Net Payable Amount(Rs.)
Before Rbt. Dt. After Rbt. Dt.
1,060
1,076
a. Energy Charges
Slab 1-
| Slab - 2-
100@5.90 590
54@7.00 378
b. Incentive on TOD
c. Demand Charge / MMFC
d. Overdrawal penalty
e. Penalty for Fall in PF
f. Power Factor Incentive
g. Colony KWH charge
h. Load Factor Rebate
i. Special Rebate for Railway Traction
j. Mega Lift Rebate
k. Electricity Charge (a to j)
1. Electricity Duty (4%)
m. Green EC Premium
n. Meter Rent
o. Customer Service Charge
p. Tax Collection at Source
q. Current Total (k to p)
Current Bill Details
968.00 Adjustment Details for Information
1. Sundry Adjustment
Debit
Credit
2. Interest on SD
3. Others
0.00 Cross Subsidy Charges
30.00 Disputed Amount
0.00 4. Last Rebate Allowed
0.00 5. Last digital rebate allowed
0.00
0.00
Message
0.00
0.00
0.00
0.00
0.00
-4.10
-10.71
0.00 The connection shall be liable for disconnection on non-payment of
0.00 all dues including arrears of previous bill(s) by due date, after notice
0.00 as per Section 56(1) of the Electricity Act, 2003. Disputed amount is
to be finalized on the outcome of the order of the respected court and
998.00 the applicable charges. ECS opt-in.Now consumer can pay using
38.72 NEFT/RTGS, Account No - TPCODL (Followed by CA Ño
0.00 withoutspace) e.g. TPCODL8XXXXXXXXXX.
40.00
0.00
0.00
1,076.72
Allowable Prompt Payment Rebate
-15.40

Return JSON in this exact format:
{
  "invoice_number": null,
  "consumer_name": null,
  "consumer_number": null,
  "meter_number": null,
  "billing_period": null,
  "previous_reading_date": null,
  "current_reading_date": null,
  "units_consumed": null,
  "bill_amount": null,
  "due_date": null,
  "address": null,
  "discom": null
}


================================================================================
